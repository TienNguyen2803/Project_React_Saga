{"ast":null,"code":"import { call, delay, put, select, takeLatest } from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { getListTask, addTaks, update, deleteTask } from \"../apis/tasks\";\nimport { fetchTasksFailed, fetchTasksSuccess, addTasksSuccess, addTasksFailed, fetchTasks, actDeleteTask } from \"../actions/tasks\";\nimport { hideLoading, showLoading } from \"../actions/ui\";\nimport { hideModal } from \"../actions/modalGlobal\";\nimport { STATUS } from \"../constants/index\";\n\nfunction* watchFetchTasks({\n  payload\n}) {\n  try {\n    yield put(showLoading());\n    const {\n      param\n    } = payload;\n    const res = yield call(getListTask, param);\n    const {\n      data\n    } = res;\n    yield put(fetchTasksSuccess(data));\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (e) {\n    yield put(fetchTasksFailed(e));\n  }\n}\n\nfunction* fetchFilter({\n  payload\n}) {\n  yield delay(500);\n  const {\n    keyword\n  } = payload;\n  yield put(fetchTasks({\n    q: keyword\n  })); //const action = yield put()\n  //yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask({\n  payload\n}) {\n  try {\n    yield put(showLoading());\n    const {\n      title,\n      description\n    } = payload.data;\n    const res = yield call(addTaks, {\n      title,\n      description,\n      status: STATUS[0].value\n    });\n    yield put(addTasksSuccess(res.data));\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n    yield put(addTasksFailed(error));\n  }\n}\n\nfunction* updateTasks({\n  payload\n}) {\n  try {\n    const {\n      task\n    } = payload;\n    yield call(update, task, task.id);\n    yield put(showLoading());\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* deleteTaskSaga({\n  payload\n}) {\n  try {\n    const {\n      id\n    } = payload;\n    yield put(showLoading());\n    yield call(deleteTask, id);\n    yield put(actDeleteTask(id));\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* rootSaga() {\n  yield takeLatest(taskType.FETCH_TASK, watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER, fetchFilter);\n  yield takeLatest(taskType.ADD_TASK, addTask);\n  yield takeLatest(taskType.UPDATE_TASK, updateTasks);\n  yield takeLatest(taskType.DELETE_TASK, deleteTaskSaga);\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["/Users/minhtien/Documents/react/project-saga/src/saga/index.js"],"names":["call","delay","put","select","takeLatest","taskType","getListTask","addTaks","update","deleteTask","fetchTasksFailed","fetchTasksSuccess","addTasksSuccess","addTasksFailed","fetchTasks","actDeleteTask","hideLoading","showLoading","hideModal","STATUS","watchFetchTasks","payload","param","res","data","e","fetchFilter","keyword","q","addTask","title","description","status","value","error","console","log","updateTasks","task","id","deleteTaskSaga","rootSaga","FETCH_TASK","FETCH_FILTER","ADD_TASK","UPDATE_TASK","DELETE_TASK"],"mappings":"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","sourcesContent":["import { call, delay, put, select, takeLatest } from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { getListTask, addTaks, update, deleteTask } from \"../apis/tasks\";\nimport {\n  fetchTasksFailed,\n  fetchTasksSuccess,\n  addTasksSuccess,\n  addTasksFailed,\n  fetchTasks,\n  actDeleteTask,\n} from \"../actions/tasks\";\nimport { hideLoading, showLoading } from \"../actions/ui\";\nimport { hideModal } from \"../actions/modalGlobal\";\n\nimport { STATUS } from \"../constants/index\";\n\nfunction* watchFetchTasks({ payload }) {\n  try {\n    yield put(showLoading());\n    const { param } = payload;\n    const res = yield call(getListTask, param);\n    const { data } = res;\n    yield put(fetchTasksSuccess(data));\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (e) {\n    yield put(fetchTasksFailed(e));\n  }\n}\n\nfunction* fetchFilter({ payload }) {\n  yield delay(500);\n  const { keyword } = payload;\n  yield put(\n    fetchTasks({\n      q: keyword,\n    })\n  );\n  //const action = yield put()\n  //yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask({ payload }) {\n  try {\n    yield put(showLoading());\n    const { title, description } = payload.data;\n    const res = yield call(addTaks, {\n      title,\n      description,\n      status: STATUS[0].value,\n    });\n    yield put(addTasksSuccess(res.data));\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n    yield put(addTasksFailed(error));\n  }\n}\n\nfunction* updateTasks({ payload }) {\n  try {\n    const { task } = payload;\n    yield call(update, task, task.id);\n\n    yield put(showLoading());\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* deleteTaskSaga({ payload }) {\n  try {\n    const { id } = payload;\n    yield put(showLoading());\n    yield call(deleteTask, id);\n    yield put(actDeleteTask(id));\n    yield put(hideModal());\n    yield delay(1000);\n    yield put(hideLoading());\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* rootSaga() {\n  yield takeLatest(taskType.FETCH_TASK, watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER, fetchFilter);\n  yield takeLatest(taskType.ADD_TASK, addTask);\n  yield takeLatest(taskType.UPDATE_TASK, updateTasks);\n  yield takeLatest(taskType.DELETE_TASK, deleteTaskSaga);\n}\n\nexport default rootSaga;\n"]},"metadata":{},"sourceType":"module"}