{"ast":null,"code":"import { call, delay, fork, put, select, take, takeLatest } from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { fectchTasks, addTaks } from \"../apis/tasks\";\nimport { fetchTasksFailed, fetchTasksSuccess, fetchFilterSuccess, addTasksSuccess, addTasksFailed } from \"../actions/tasks\";\nimport { hideLoading, showLoading } from \"../actions/ui\";\nimport { STATUS } from \"../constants/index\";\n\nfunction* watchFetchTasks() {\n  while (true) {\n    try {\n      yield take(taskType.FETCH_TASK);\n      yield put(showLoading());\n      const res = yield call(fectchTasks);\n      const {\n        data\n      } = res;\n      yield put(fetchTasksSuccess(data));\n      yield delay(1000);\n      yield put(hideLoading());\n    } catch (e) {\n      console.log(e);\n      yield put(fetchTasksFailed(e));\n    }\n  }\n}\n\nfunction* fetchFilter({\n  payload\n}) {\n  yield delay(500);\n  const {\n    keyword\n  } = payload;\n  const list = yield select(state => state.tasks.listTasks);\n  const listTaskFiltered = list.filter(task => task.title.trim().toLowerCase().includes(keyword.trim().toLowerCase()));\n  console.log(listTaskFiltered);\n  yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask({\n  payload\n}) {\n  try {\n    yield showLoading();\n    console.log(payload);\n    const {\n      title,\n      description\n    } = payload;\n    const res = yield call(addTaks({\n      title,\n      description,\n      status: STATUS[0].value\n    }));\n    yield put(addTasksSuccess(res));\n    yield delay(1000);\n    yield put(hideLoading);\n  } catch (error) {\n    yield put(addTasksFailed(error));\n  }\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER, fetchFilter);\n  yield takeLatest(taskType.ADD_TASK, addTask);\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["/Users/minhtien/Documents/react/project-saga/src/saga/index.js"],"names":["call","delay","fork","put","select","take","takeLatest","taskType","fectchTasks","addTaks","fetchTasksFailed","fetchTasksSuccess","fetchFilterSuccess","addTasksSuccess","addTasksFailed","hideLoading","showLoading","STATUS","watchFetchTasks","FETCH_TASK","res","data","e","console","log","fetchFilter","payload","keyword","list","state","tasks","listTasks","listTaskFiltered","filter","task","title","trim","toLowerCase","includes","addTask","description","status","value","error","rootSaga","FETCH_FILTER","ADD_TASK"],"mappings":"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","sourcesContent":["import {\n  call,\n  delay,\n  fork,\n  put,\n  select,\n  take,\n  takeLatest,\n} from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { fectchTasks, addTaks } from \"../apis/tasks\";\nimport {\n  fetchTasksFailed,\n  fetchTasksSuccess,\n  fetchFilterSuccess,\n  addTasksSuccess,\n  addTasksFailed,\n} from \"../actions/tasks\";\nimport { hideLoading, showLoading } from \"../actions/ui\";\nimport { STATUS } from \"../constants/index\";\nfunction* watchFetchTasks() {\n  while (true) {\n    try {\n      yield take(taskType.FETCH_TASK);\n      yield put(showLoading());\n      const res = yield call(fectchTasks);\n      const { data } = res;\n      yield put(fetchTasksSuccess(data));\n      yield delay(1000);\n      yield put(hideLoading());\n    } catch (e) {\n      console.log(e);\n      yield put(fetchTasksFailed(e));\n    }\n  }\n}\n\nfunction* fetchFilter({ payload }) {\n  yield delay(500);\n  const { keyword } = payload;\n  const list = yield select((state) => state.tasks.listTasks);\n  const listTaskFiltered = list.filter((task) =>\n    task.title.trim().toLowerCase().includes(keyword.trim().toLowerCase())\n  );\n  console.log(listTaskFiltered);\n  yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask({ payload }) {\n  try {\n    yield showLoading();\n    console.log(payload);\n    const { title, description } = payload;\n    const res = yield call(\n      addTaks({\n        title,\n        description,\n        status: STATUS[0].value,\n      })\n    );\n    yield put(addTasksSuccess(res));\n    yield delay(1000);\n    yield put(hideLoading);\n  } catch (error) {\n    yield put(addTasksFailed(error));\n  }\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER, fetchFilter);\n  yield takeLatest(taskType.ADD_TASK, addTask);\n}\n\nexport default rootSaga;\n"]},"metadata":{},"sourceType":"module"}