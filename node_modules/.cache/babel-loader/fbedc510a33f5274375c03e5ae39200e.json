{"ast":null,"code":"import { call, delay, fork, put, select, take, takeLatest } from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { fectchTasks, addTaks } from \"../apis/tasks\";\nimport { fetchTasksFailed, fetchTasksSuccess, fetchFilterSuccess, addTasksSuccess, addTasksFailed } from \"../actions/tasks\";\nimport { hideLoading, showLoading } from '../actions/ui';\nimport { STATUS } from '../constants/index';\n\nfunction* watchFetchTasks() {\n  while (true) {\n    try {\n      yield take(taskType.FETCH_TASK);\n      yield put(showLoading());\n      const res = yield call(fectchTasks);\n      const {\n        data\n      } = res;\n      yield put(fetchTasksSuccess(data));\n      yield delay(1000);\n      yield put(hideLoading());\n    } catch (e) {\n      console.log(e);\n      yield put(fetchTasksFailed(e));\n    }\n  }\n}\n\nfunction* fetchFilter({\n  payload\n}) {\n  yield delay(500);\n  const {\n    keyword\n  } = payload;\n  const list = yield select(state => state.tasks.listTasks);\n  const listTaskFiltered = list.filter(task => task.title.trim().toLowerCase().includes(keyword.trim().toLowerCase()));\n  console.log(listTaskFiltered);\n  yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask({\n  payload\n}) {\n  try {\n    yield showLoading();\n    const {\n      title,\n      description\n    } = payload;\n    const res = yield call(addTaks({\n      title,\n      description,\n      status: STATUS[0].value\n    }));\n    yield put();\n  } catch (error) {}\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER, fetchFilter);\n  yield takeLatest(taskType.ADD_TASK, addTask);\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["/Users/minhtien/Documents/react/project-saga/src/saga/index.js"],"names":["call","delay","fork","put","select","take","takeLatest","taskType","fectchTasks","addTaks","fetchTasksFailed","fetchTasksSuccess","fetchFilterSuccess","addTasksSuccess","addTasksFailed","hideLoading","showLoading","STATUS","watchFetchTasks","FETCH_TASK","res","data","e","console","log","fetchFilter","payload","keyword","list","state","tasks","listTasks","listTaskFiltered","filter","task","title","trim","toLowerCase","includes","addTask","description","status","value","error","rootSaga","FETCH_FILTER","ADD_TASK"],"mappings":"AAAA,SAASA,IAAT,EAAeC,KAAf,EAAsBC,IAAtB,EAA4BC,GAA5B,EAAiCC,MAAjC,EAAyCC,IAAzC,EAA+CC,UAA/C,QAAiE,oBAAjE;AACA,OAAO,KAAKC,QAAZ,MAA0B,oBAA1B;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,eAArC;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,EAA8CC,kBAA9C,EAAkEC,eAAlE,EAAmFC,cAAnF,QAAwG,kBAAxG;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,eAAvC;AACA,SAAQC,MAAR,QAAqB,oBAArB;;AACA,UAAUC,eAAV,GAA4B;AAC1B,SAAO,IAAP,EAAa;AACX,QAAI;AACF,YAAMb,IAAI,CAACE,QAAQ,CAACY,UAAV,CAAV;AACA,YAAMhB,GAAG,CAACa,WAAW,EAAZ,CAAT;AACA,YAAMI,GAAG,GAAG,MAAMpB,IAAI,CAACQ,WAAD,CAAtB;AACA,YAAM;AAAEa,QAAAA;AAAF,UAAWD,GAAjB;AACA,YAAMjB,GAAG,CAACQ,iBAAiB,CAACU,IAAD,CAAlB,CAAT;AACA,YAAMpB,KAAK,CAAC,IAAD,CAAX;AACA,YAAME,GAAG,CAACY,WAAW,EAAZ,CAAT;AACD,KARD,CAQE,OAAOO,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,YAAMnB,GAAG,CAACO,gBAAgB,CAACY,CAAD,CAAjB,CAAT;AACD;AACF;AACF;;AAED,UAAUG,WAAV,CAAsB;AAACC,EAAAA;AAAD,CAAtB,EAAgC;AAC9B,QAAMzB,KAAK,CAAC,GAAD,CAAX;AACA,QAAM;AAAC0B,IAAAA;AAAD,MAAYD,OAAlB;AACA,QAAME,IAAI,GAAG,MAAMxB,MAAM,CAACyB,KAAK,IAAKA,KAAK,CAACC,KAAN,CAAYC,SAAvB,CAAzB;AACA,QAAMC,gBAAgB,GAAGJ,IAAI,CAACK,MAAL,CAAYC,IAAI,IACvCA,IAAI,CAACC,KAAL,CAAWC,IAAX,GAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCX,OAAO,CAACS,IAAR,GAAeC,WAAf,EAAzC,CADuB,CAAzB;AAGAd,EAAAA,OAAO,CAACC,GAAR,CAAYQ,gBAAZ;AACA,QAAM7B,GAAG,CAACS,kBAAkB,CAACoB,gBAAD,CAAnB,CAAT;AACD;;AAED,UAAUO,OAAV,CAAmB;AAACb,EAAAA;AAAD,CAAnB,EAA6B;AAC3B,MAAI;AACF,UAAMV,WAAW,EAAjB;AACA,UAAM;AAACmB,MAAAA,KAAD;AAASK,MAAAA;AAAT,QAAyBd,OAA/B;AACA,UAAMN,GAAG,GAAG,MAAMpB,IAAI,CAACS,OAAO,CAAC;AAC7B0B,MAAAA,KAD6B;AACtBK,MAAAA,WADsB;AACTC,MAAAA,MAAM,EAAGxB,MAAM,CAAC,CAAD,CAAN,CAAUyB;AADV,KAAD,CAAR,CAAtB;AAGA,UAAMvC,GAAG,EAAT;AACD,GAPD,CAOE,OAAOwC,KAAP,EAAc,CAEf;AACF;;AAED,UAAUC,QAAV,GAAqB;AACnB,QAAM1C,IAAI,CAACgB,eAAD,CAAV;AACA,QAAMZ,UAAU,CAACC,QAAQ,CAACsC,YAAV,EAAuBpB,WAAvB,CAAhB;AACA,QAAMnB,UAAU,CAACC,QAAQ,CAACuC,QAAV,EAAmBP,OAAnB,CAAhB;AAED;;AAED,eAAeK,QAAf","sourcesContent":["import { call, delay, fork, put, select, take, takeLatest } from \"redux-saga/effects\";\nimport * as taskType from \"../constants/tasks\";\nimport { fectchTasks ,addTaks } from \"../apis/tasks\";\nimport { fetchTasksFailed, fetchTasksSuccess ,fetchFilterSuccess ,addTasksSuccess ,addTasksFailed} from \"../actions/tasks\";\nimport {hideLoading, showLoading} from '../actions/ui';\nimport {STATUS} from '../constants/index';\nfunction* watchFetchTasks() {\n  while (true) {\n    try {\n      yield take(taskType.FETCH_TASK);\n      yield put(showLoading());\n      const res = yield call(fectchTasks);\n      const { data } = res;\n      yield put(fetchTasksSuccess(data));\n      yield delay(1000)\n      yield put(hideLoading())\n    } catch (e) {\n      console.log(e);\n      yield put(fetchTasksFailed(e));\n    }\n  }\n}\n\nfunction* fetchFilter({payload}){\n  yield delay(500);\n  const {keyword} = payload;\n  const list = yield select(state =>  state.tasks.listTasks)\n  const listTaskFiltered = list.filter(task =>\n    task.title.trim().toLowerCase().includes(keyword.trim().toLowerCase())\n  )\n  console.log(listTaskFiltered);\n  yield put(fetchFilterSuccess(listTaskFiltered));\n}\n\nfunction* addTask ({payload}){\n  try {\n    yield showLoading();\n    const {title , description } = payload;\n    const res = yield call(addTaks({\n      title, description ,status : STATUS[0].value\n    }));\n    yield put()\n  } catch (error) {\n\n  }\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchTasks);\n  yield takeLatest(taskType.FETCH_FILTER,fetchFilter)\n  yield takeLatest(taskType.ADD_TASK,addTask)\n\n}\n\nexport default rootSaga;\n"]},"metadata":{},"sourceType":"module"}